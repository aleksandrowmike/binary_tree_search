{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/binary-tree-node.ts","src/binary-tree.ts","src/test.ts"],"names":[],"mappings":"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","file":"bundel.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export class BinaryTreeNode<T> {\r\n    private _Left: BinaryTreeNode<T>;\r\n    private _Right: BinaryTreeNode<T>;\r\n    private _Key: number;\r\n    private _Data: T;\r\n    constructor(insertData: T, key: number) {\r\n        this._Data = insertData;\r\n        this._Key = key;\r\n    }\r\n    public printNode(): object {\r\n        const tree: object[] = [];\r\n        tree.push({\r\n            \"key\": this._Key,\r\n            \"data\": this._Data,\r\n            \"leftChild\": this._Left,\r\n            \"rightChild\": this._Right\r\n        });\r\n        return tree;\r\n    }\r\n    public getLeft(): BinaryTreeNode<T> {\r\n        return this._Left;\r\n    }\r\n    public setLeft(value: BinaryTreeNode<T>): void {\r\n        this._Left = value;\r\n    }\r\n    public setRight(value: BinaryTreeNode<T>): void {\r\n        this._Right = value;\r\n    }\r\n    public getRight(): BinaryTreeNode<T> {\r\n        return this._Right;\r\n    }\r\n    public getKey(): number {\r\n        return this._Key;\r\n    }\r\n}\r\n","import { BinaryTreeNode } from \"./binary-tree-node\";\r\n\r\nexport class BinaryTree<T> {\r\n    private root: BinaryTreeNode<T>;\r\n    private _node: object[] = [];\r\n    public find(key: number): BinaryTreeNode<T> {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        while (current.getKey() !== key) {\r\n            current = key < current.getKey() ? current.getLeft() : current.getRight();\r\n            if (current === undefined) { return null; }\r\n        }\r\n        return current;\r\n    }\r\n    public insert(insertData: T, key: number): void {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        let parent: BinaryTreeNode<T>;\r\n        const newNode: BinaryTreeNode<T> = new BinaryTreeNode<T>(insertData, key);\r\n        if (this.root === undefined) { this.root = newNode; } else {\r\n            while (true) {\r\n                parent = current;\r\n                if (key < current.getKey()) {\r\n                    current = current.getLeft();\r\n                    if (current === undefined) {\r\n                        parent.setLeft(newNode);\r\n                        return;\r\n                    }\r\n                } else {\r\n                    current = current.getRight();\r\n                    if (current === undefined) {\r\n                        parent.setRight(newNode);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    public print(startNode: BinaryTreeNode<T>): object[] {\r\n        if (startNode !== undefined) {\r\n            if (startNode.getLeft() !== undefined) {\r\n                const left = document.createElement(\"div\");\r\n                left.id = \"\" + startNode.getLeft().getKey();\r\n                left.setAttribute(\"data-branch\", \"left\");\r\n                const text = document.createElement(\"span\");\r\n                text.append(startNode.getLeft().getKey().toString());\r\n                left.appendChild(text);\r\n                if (document.getElementById(startNode.getKey().toString())) {\r\n                    document.getElementById(startNode.getKey().toString()).appendChild(left);\r\n                } else {\r\n                    document.getElementById(startNode.getKey().toString()).appendChild(left);\r\n                }\r\n                this.print(startNode.getLeft());\r\n                if (startNode.getRight()) {\r\n                    left.classList.add(\"left\");\r\n                }\r\n                if (startNode.getLeft()) {\r\n                    left.classList.add(\"left\");\r\n                }\r\n            }\r\n            if (startNode.getRight() !== undefined) {\r\n                const right = document.createElement(\"div\");\r\n                right.id = \"\" + startNode.getRight().getKey();\r\n                right.setAttribute(\"data-branch\", \"right\");\r\n                const text = document.createElement(\"span\");\r\n                text.append(startNode.getRight().getKey().toString());\r\n                right.appendChild(text);\r\n                if (document.getElementById(startNode.getKey().toString())) {\r\n                    document.getElementById(startNode.getKey().toString()).appendChild(right);\r\n                }\r\n                this.print(startNode.getRight());\r\n                if (startNode.getRight()) {\r\n                    right.classList.add(\"right\");\r\n                }\r\n            }\r\n        }\r\n        return this._node;\r\n    }\r\n    public getSuccessor(deleteNode: BinaryTreeNode<T>): BinaryTreeNode<T> {\r\n        let parentSuccessor: BinaryTreeNode<T> = deleteNode;\r\n        let successor: BinaryTreeNode<T>;\r\n        let current: BinaryTreeNode<T> = successor.getRight();\r\n        while (current !== undefined) {\r\n            parentSuccessor = successor;\r\n            successor = current;\r\n            current = current.getLeft();\r\n        }\r\n        if (successor !== deleteNode.getRight()) {\r\n            parentSuccessor.setLeft(successor.getRight());\r\n            successor.setRight(deleteNode.getRight());\r\n        }\r\n        return successor;\r\n    }\r\n    public delete(key: number): boolean {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        let parent: BinaryTreeNode<T>;\r\n        let isLeft: boolean = false;\r\n        while (current.getKey() !== key) {\r\n            parent = current;\r\n            if (key < current.getKey()) {\r\n                current = current.getLeft();\r\n                isLeft = true;\r\n            } else {\r\n                isLeft = false;\r\n                current = current.getRight();\r\n            }\r\n            if (current === undefined) { return false; }\r\n        }\r\n        if (current.getLeft() === undefined && current.getRight() === undefined) {\r\n            if (current === this.root) {\r\n                current = undefined;\r\n            } else if (isLeft) {\r\n                parent.setLeft(undefined);\r\n            } else {\r\n                parent.setRight(undefined);\r\n            }\r\n        } else if (current.getRight() === undefined) {\r\n            if (current === this.root) {\r\n                this.root = current.getLeft();\r\n            } else if (isLeft) {\r\n                parent.setLeft(current.getLeft());\r\n            } else {\r\n                current.setRight(current.getLeft());\r\n            }\r\n        } else if (current.getLeft() === undefined) {\r\n            if (current === this.root) {\r\n                this.root = current.getRight();\r\n            } else if (isLeft) {\r\n                parent.setLeft(current.getRight());\r\n            } else {\r\n                parent.setRight(current.getRight());\r\n            }\r\n        } else {\r\n            const successor: BinaryTreeNode<T> = this.getSuccessor(current);\r\n            if (current === this.root) {\r\n                this.root = successor;\r\n            } else if (isLeft) {\r\n                parent.setLeft(successor);\r\n            } else {\r\n                parent.setRight(successor);\r\n            }\r\n            successor.setLeft(current.getLeft());\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","import { BinaryTree } from \"./binary-tree\";\r\nimport { BinaryTreeNode } from \"./binary-tree-node\";\r\n\r\nconst Tree: BinaryTree<string> = new BinaryTree<string>();\r\n\r\nTree.insert(\"John\", 3);\r\nTree.insert(\"T1000\", 8);\r\nTree.insert(\"T1500\", 15);\r\nTree.insert(\"T500\", 5);\r\nTree.insert(\"T1200\", 12);\r\nTree.insert(\"T1100\", 11);\r\nTree.insert(\"T1300\", 13);\r\nTree.insert(\"T1000\", 10);\r\nTree.insert(\"T1000\", 17);\r\nTree.insert(\"Sara\", 1);\r\nTree.insert(\"T800\", 2);\r\nTree.insert(\"T400\", 4);\r\nTree.insert(\"T900\", 9);\r\n\r\nconst key: number = 3;\r\nconst finds: BinaryTreeNode<string> = Tree.find(key);\r\nconst root = document.createElement(\"div\");\r\nroot.id = \"\" + key;\r\nroot.setAttribute(\"data-branch\", \"root\");\r\nconst text = document.createElement(\"span\");\r\ntext.append(key.toString());\r\ntext.classList.add(\"root-text\");\r\nroot.appendChild(text);\r\ndocument.getElementById(\"container\").appendChild(root);\r\nTree.print(finds);\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYmluYXJ5LXRyZWUtbm9kZS50cyIsInNyYy9iaW5hcnktdHJlZS50cyIsInNyYy90ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQUEsSUFBQSxpQkFBQSxhQUFBLFlBQUE7QUFLSSxhQUFBLGNBQUEsQ0FBWSxVQUFaLEVBQTJCLEdBQTNCLEVBQXNDO0FBQ2xDLGFBQUssS0FBTCxHQUFhLFVBQWI7QUFDQSxhQUFLLElBQUwsR0FBWSxHQUFaO0FBQ0g7QUFDTSxtQkFBQSxTQUFBLENBQUEsU0FBQSxHQUFQLFlBQUE7QUFDSSxZQUFNLE9BQWlCLEVBQXZCO0FBQ0EsYUFBSyxJQUFMLENBQVU7QUFDTixtQkFBTyxLQUFLLElBRE47QUFFTixvQkFBUSxLQUFLLEtBRlA7QUFHTix5QkFBYSxLQUFLLEtBSFo7QUFJTiwwQkFBYyxLQUFLO0FBSmIsU0FBVjtBQU1BLGVBQU8sSUFBUDtBQUNILEtBVE07QUFVQSxtQkFBQSxTQUFBLENBQUEsT0FBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssS0FBWjtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsT0FBQSxHQUFQLFVBQWUsS0FBZixFQUF1QztBQUNuQyxhQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0gsS0FGTTtBQUdBLG1CQUFBLFNBQUEsQ0FBQSxRQUFBLEdBQVAsVUFBZ0IsS0FBaEIsRUFBd0M7QUFDcEMsYUFBSyxNQUFMLEdBQWMsS0FBZDtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsUUFBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssTUFBWjtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsTUFBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssSUFBWjtBQUNILEtBRk07QUFHWCxXQUFBLGNBQUE7QUFBQyxDQWxDRCxFQUFBO0FBQWEsUUFBQSxjQUFBLEdBQUEsY0FBQTs7Ozs7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S0FBSyxNQUFMLENBQVksT0FBWixFQUFxQixFQUFyQjtBQUNBLEtBQUssTUFBTCxDQUFZLE1BQVosRUFBb0IsQ0FBcEI7QUFDQSxLQUFLLE1BQUwsQ0FBWSxNQUFaLEVBQW9CLENBQXBCO0FBQ0EsS0FBSyxNQUFMLENBQVksTUFBWixFQUFvQixDQUFwQjtBQUNBLEtBQUssTUFBTCxDQUFZLE1BQVosRUFBb0IsQ0FBcEI7QUFFQSxJQUFNLE1BQWMsQ0FBcEI7QUFDQSxJQUFNLFFBQWdDLEtBQUssSUFBTCxDQUFVLEdBQVYsQ0FBdEM7QUFDQSxJQUFNLE9BQU8sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWI7QUFDQSxLQUFLLEVBQUwsR0FBVSxLQUFLLEdBQWY7QUFDQSxLQUFLLFlBQUwsQ0FBa0IsYUFBbEIsRUFBaUMsTUFBakM7QUFDQSxJQUFNLE9BQU8sU0FBUyxhQUFULENBQXVCLE1BQXZCLENBQWI7QUFDQSxLQUFLLE1BQUwsQ0FBWSxJQUFJLFFBQUosRUFBWjtBQUNBLEtBQUssU0FBTCxDQUFlLEdBQWYsQ0FBbUIsV0FBbkI7QUFDQSxLQUFLLFdBQUwsQ0FBaUIsSUFBakI7QUFDQSxTQUFTLGNBQVQsQ0FBd0IsV0FBeEIsRUFBcUMsV0FBckMsQ0FBaUQsSUFBakQ7QUFDQSxLQUFLLEtBQUwsQ0FBVyxLQUFYIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGNsYXNzIEJpbmFyeVRyZWVOb2RlPFQ+IHtcclxuICAgIHByaXZhdGUgX0xlZnQ6IEJpbmFyeVRyZWVOb2RlPFQ+O1xyXG4gICAgcHJpdmF0ZSBfUmlnaHQ6IEJpbmFyeVRyZWVOb2RlPFQ+O1xyXG4gICAgcHJpdmF0ZSBfS2V5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9EYXRhOiBUO1xyXG4gICAgY29uc3RydWN0b3IoaW5zZXJ0RGF0YTogVCwga2V5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9EYXRhID0gaW5zZXJ0RGF0YTtcclxuICAgICAgICB0aGlzLl9LZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcHJpbnROb2RlKCk6IG9iamVjdCB7XHJcbiAgICAgICAgY29uc3QgdHJlZTogb2JqZWN0W10gPSBbXTtcclxuICAgICAgICB0cmVlLnB1c2goe1xyXG4gICAgICAgICAgICBcImtleVwiOiB0aGlzLl9LZXksXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiB0aGlzLl9EYXRhLFxyXG4gICAgICAgICAgICBcImxlZnRDaGlsZFwiOiB0aGlzLl9MZWZ0LFxyXG4gICAgICAgICAgICBcInJpZ2h0Q2hpbGRcIjogdGhpcy5fUmlnaHRcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJlZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRMZWZ0KCk6IEJpbmFyeVRyZWVOb2RlPFQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fTGVmdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRMZWZ0KHZhbHVlOiBCaW5hcnlUcmVlTm9kZTxUPik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX0xlZnQgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRSaWdodCh2YWx1ZTogQmluYXJ5VHJlZU5vZGU8VD4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9SaWdodCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFJpZ2h0KCk6IEJpbmFyeVRyZWVOb2RlPFQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fUmlnaHQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0S2V5KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX0tleTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCaW5hcnlUcmVlTm9kZSB9IGZyb20gXCIuL2JpbmFyeS10cmVlLW5vZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCaW5hcnlUcmVlPFQ+IHtcclxuICAgIHByaXZhdGUgcm9vdDogQmluYXJ5VHJlZU5vZGU8VD47XHJcbiAgICBwcml2YXRlIF9ub2RlOiBvYmplY3RbXSA9IFtdO1xyXG4gICAgcHVibGljIGZpbmQoa2V5OiBudW1iZXIpOiBCaW5hcnlUcmVlTm9kZTxUPiB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gdGhpcy5yb290O1xyXG4gICAgICAgIHdoaWxlIChjdXJyZW50LmdldEtleSgpICE9PSBrZXkpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IGtleSA8IGN1cnJlbnQuZ2V0S2V5KCkgPyBjdXJyZW50LmdldExlZnQoKSA6IGN1cnJlbnQuZ2V0UmlnaHQoKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gbnVsbDsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBpbnNlcnQoaW5zZXJ0RGF0YTogVCwga2V5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBsZXQgY3VycmVudDogQmluYXJ5VHJlZU5vZGU8VD4gPSB0aGlzLnJvb3Q7XHJcbiAgICAgICAgbGV0IHBhcmVudDogQmluYXJ5VHJlZU5vZGU8VD47XHJcbiAgICAgICAgY29uc3QgbmV3Tm9kZTogQmluYXJ5VHJlZU5vZGU8VD4gPSBuZXcgQmluYXJ5VHJlZU5vZGU8VD4oaW5zZXJ0RGF0YSwga2V5KTtcclxuICAgICAgICBpZiAodGhpcy5yb290ID09PSB1bmRlZmluZWQpIHsgdGhpcy5yb290ID0gbmV3Tm9kZTsgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5IDwgY3VycmVudC5nZXRLZXkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmdldExlZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zZXRMZWZ0KG5ld05vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5nZXRSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNldFJpZ2h0KG5ld05vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHB1YmxpYyBwcmludChzdGFydE5vZGU6IEJpbmFyeVRyZWVOb2RlPFQ+KTogb2JqZWN0W10ge1xyXG4gICAgICAgIGlmIChzdGFydE5vZGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhcnROb2RlLmdldExlZnQoKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGxlZnQuaWQgPSBcIlwiICsgc3RhcnROb2RlLmdldExlZnQoKS5nZXRLZXkoKTtcclxuICAgICAgICAgICAgICAgIGxlZnQuc2V0QXR0cmlidXRlKFwiZGF0YS1icmFuY2hcIiwgXCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5hcHBlbmQoc3RhcnROb2RlLmdldExlZnQoKS5nZXRLZXkoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQodGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnROb2RlLmdldEtleSgpLnRvU3RyaW5nKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnROb2RlLmdldEtleSgpLnRvU3RyaW5nKCkpLmFwcGVuZENoaWxkKGxlZnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydE5vZGUuZ2V0S2V5KCkudG9TdHJpbmcoKSkuYXBwZW5kQ2hpbGQobGVmdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50KHN0YXJ0Tm9kZS5nZXRMZWZ0KCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0Tm9kZS5nZXRSaWdodCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdC5jbGFzc0xpc3QuYWRkKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzdGFydE5vZGUuZ2V0TGVmdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdC5jbGFzc0xpc3QuYWRkKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3RhcnROb2RlLmdldFJpZ2h0KCkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQuaWQgPSBcIlwiICsgc3RhcnROb2RlLmdldFJpZ2h0KCkuZ2V0S2V5KCk7XHJcbiAgICAgICAgICAgICAgICByaWdodC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5jaFwiLCBcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5hcHBlbmQoc3RhcnROb2RlLmdldFJpZ2h0KCkuZ2V0S2V5KCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByaWdodC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydE5vZGUuZ2V0S2V5KCkudG9TdHJpbmcoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydE5vZGUuZ2V0S2V5KCkudG9TdHJpbmcoKSkuYXBwZW5kQ2hpbGQocmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludChzdGFydE5vZGUuZ2V0UmlnaHQoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnROb2RlLmdldFJpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByaWdodC5jbGFzc0xpc3QuYWRkKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0U3VjY2Vzc29yKGRlbGV0ZU5vZGU6IEJpbmFyeVRyZWVOb2RlPFQ+KTogQmluYXJ5VHJlZU5vZGU8VD4ge1xyXG4gICAgICAgIGxldCBwYXJlbnRTdWNjZXNzb3I6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gZGVsZXRlTm9kZTtcclxuICAgICAgICBsZXQgc3VjY2Vzc29yOiBCaW5hcnlUcmVlTm9kZTxUPjtcclxuICAgICAgICBsZXQgY3VycmVudDogQmluYXJ5VHJlZU5vZGU8VD4gPSBzdWNjZXNzb3IuZ2V0UmlnaHQoKTtcclxuICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFN1Y2Nlc3NvciA9IHN1Y2Nlc3NvcjtcclxuICAgICAgICAgICAgc3VjY2Vzc29yID0gY3VycmVudDtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuZ2V0TGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3VjY2Vzc29yICE9PSBkZWxldGVOb2RlLmdldFJpZ2h0KCkpIHtcclxuICAgICAgICAgICAgcGFyZW50U3VjY2Vzc29yLnNldExlZnQoc3VjY2Vzc29yLmdldFJpZ2h0KCkpO1xyXG4gICAgICAgICAgICBzdWNjZXNzb3Iuc2V0UmlnaHQoZGVsZXRlTm9kZS5nZXRSaWdodCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3NvcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBkZWxldGUoa2V5OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY3VycmVudDogQmluYXJ5VHJlZU5vZGU8VD4gPSB0aGlzLnJvb3Q7XHJcbiAgICAgICAgbGV0IHBhcmVudDogQmluYXJ5VHJlZU5vZGU8VD47XHJcbiAgICAgICAgbGV0IGlzTGVmdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIHdoaWxlIChjdXJyZW50LmdldEtleSgpICE9PSBrZXkpIHtcclxuICAgICAgICAgICAgcGFyZW50ID0gY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKGtleSA8IGN1cnJlbnQuZ2V0S2V5KCkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmdldExlZnQoKTtcclxuICAgICAgICAgICAgICAgIGlzTGVmdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpc0xlZnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmdldFJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnQuZ2V0TGVmdCgpID09PSB1bmRlZmluZWQgJiYgY3VycmVudC5nZXRSaWdodCgpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMucm9vdCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRMZWZ0KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0UmlnaHQodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5nZXRSaWdodCgpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMucm9vdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290ID0gY3VycmVudC5nZXRMZWZ0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0TGVmdChjdXJyZW50LmdldExlZnQoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50LnNldFJpZ2h0KGN1cnJlbnQuZ2V0TGVmdCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5nZXRMZWZ0KCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5yb290KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3QgPSBjdXJyZW50LmdldFJpZ2h0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0TGVmdChjdXJyZW50LmdldFJpZ2h0KCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldFJpZ2h0KGN1cnJlbnQuZ2V0UmlnaHQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzb3I6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gdGhpcy5nZXRTdWNjZXNzb3IoY3VycmVudCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm9vdCA9IHN1Y2Nlc3NvcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRMZWZ0KHN1Y2Nlc3Nvcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0UmlnaHQoc3VjY2Vzc29yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdWNjZXNzb3Iuc2V0TGVmdChjdXJyZW50LmdldExlZnQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJpbmFyeVRyZWUgfSBmcm9tIFwiLi9iaW5hcnktdHJlZVwiO1xyXG5pbXBvcnQgeyBCaW5hcnlUcmVlTm9kZSB9IGZyb20gXCIuL2JpbmFyeS10cmVlLW5vZGVcIjtcclxuXHJcbmNvbnN0IFRyZWU6IEJpbmFyeVRyZWU8c3RyaW5nPiA9IG5ldyBCaW5hcnlUcmVlPHN0cmluZz4oKTtcclxuXHJcblRyZWUuaW5zZXJ0KFwiSm9oblwiLCAzKTtcclxuVHJlZS5pbnNlcnQoXCJUMTAwMFwiLCA4KTtcclxuVHJlZS5pbnNlcnQoXCJUMTUwMFwiLCAxNSk7XHJcblRyZWUuaW5zZXJ0KFwiVDUwMFwiLCA1KTtcclxuVHJlZS5pbnNlcnQoXCJUMTIwMFwiLCAxMik7XHJcblRyZWUuaW5zZXJ0KFwiVDExMDBcIiwgMTEpO1xyXG5UcmVlLmluc2VydChcIlQxMzAwXCIsIDEzKTtcclxuVHJlZS5pbnNlcnQoXCJUMTAwMFwiLCAxMCk7XHJcblRyZWUuaW5zZXJ0KFwiVDEwMDBcIiwgMTcpO1xyXG5UcmVlLmluc2VydChcIlNhcmFcIiwgMSk7XHJcblRyZWUuaW5zZXJ0KFwiVDgwMFwiLCAyKTtcclxuVHJlZS5pbnNlcnQoXCJUNDAwXCIsIDQpO1xyXG5UcmVlLmluc2VydChcIlQ5MDBcIiwgOSk7XHJcblxyXG5jb25zdCBrZXk6IG51bWJlciA9IDM7XHJcbmNvbnN0IGZpbmRzOiBCaW5hcnlUcmVlTm9kZTxzdHJpbmc+ID0gVHJlZS5maW5kKGtleSk7XHJcbmNvbnN0IHJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5yb290LmlkID0gXCJcIiArIGtleTtcclxucm9vdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5jaFwiLCBcInJvb3RcIik7XHJcbmNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxudGV4dC5hcHBlbmQoa2V5LnRvU3RyaW5nKCkpO1xyXG50ZXh0LmNsYXNzTGlzdC5hZGQoXCJyb290LXRleHRcIik7XHJcbnJvb3QuYXBwZW5kQ2hpbGQodGV4dCk7XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLmFwcGVuZENoaWxkKHJvb3QpO1xyXG5UcmVlLnByaW50KGZpbmRzKTtcclxuIl19"}