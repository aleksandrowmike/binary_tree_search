{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/binary-tree-node.ts","src/binary-tree.ts","src/test.ts"],"names":[],"mappings":"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,KAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,KAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,KAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,KAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,KAAK,MAAL,CAAY,OAAZ,EAAqB,EAArB;AACA,KAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,KAAK,MAAL,CAAY,OAAZ,EAAqB,EAArB;AACA,KAAK,MAAL,CAAY,OAAZ,EAAqB,EAArB;AACA,KAAK,MAAL,CAAY,OAAZ,EAAqB,EAArB;AACA,KAAK,MAAL,CAAY,OAAZ,EAAqB,EAArB;AAEA,IAAM,MAAc,CAApB;AACA,IAAM,QAAgC,KAAK,IAAL,CAAU,GAAV,CAAtC;AAEA,QAAQ,GAAR,CAAY,MAAM,SAAN,EAAZ;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundel.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export class BinaryTreeNode<T> {\r\n    private _Left: BinaryTreeNode<T>;\r\n    private _Right: BinaryTreeNode<T>;\r\n    private _Key: number;\r\n    private _Data: T;\r\n    constructor(insertData: T, key: number) {\r\n        this._Data = insertData;\r\n        this._Key = key;\r\n    }\r\n    public printNode(): object {\r\n        const tree: object[] = [];\r\n        tree.push({\r\n            \"key\": this._Key,\r\n            \"data\": this._Data,\r\n            \"leftChild\": this._Left,\r\n            \"rightChild\": this._Right\r\n        });\r\n        return tree;\r\n    }\r\n    public getLeft(): BinaryTreeNode<T> {\r\n        return this._Left;\r\n    }\r\n    public setLeft(value: BinaryTreeNode<T>): void {\r\n        this._Left = value;\r\n    }\r\n    public setRight(value: BinaryTreeNode<T>): void {\r\n        this._Right = value;\r\n    }\r\n    public getRight(): BinaryTreeNode<T> {\r\n        return this._Right;\r\n    }\r\n    public getKey(): number {\r\n        return this._Key;\r\n    }\r\n}\r\n","import { BinaryTreeNode } from \"./binary-tree-node\";\r\n\r\nexport class BinaryTree<T> {\r\n    private root: BinaryTreeNode<T>;\r\n   // private _node: object = [];\r\n    public find(key: number): BinaryTreeNode<T> {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        while (current.getKey() !== key) {\r\n            current = key < current.getKey() ? current.getLeft() : current.getRight();\r\n            if (current === undefined) { return null; }\r\n        }\r\n        return current;\r\n    }\r\n    public insert(insertData: T, key: number): void {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        let parent: BinaryTreeNode<T>;\r\n        const newNode: BinaryTreeNode<T> = new BinaryTreeNode<T>(insertData, key);\r\n        if (this.root === undefined) { this.root = newNode; } else {\r\n            while (true) {\r\n                parent = current;\r\n                if (key < current.getKey()) {\r\n                    current = current.getLeft();\r\n                    if (current === undefined) {\r\n                        parent.setLeft(newNode);\r\n                        return;\r\n                    }\r\n                } else {\r\n                    current = current.getRight();\r\n                    if (current === undefined) {\r\n                        parent.setRight(newNode);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    /*public print(startNode: BinaryTreeNode<T>): void {\r\n        if (startNode !== undefined) {\r\n            this.print(startNode.getLeft());\r\n            this.print(startNode.getRight());\r\n        }\r\n    }*/\r\n    public getSuccessor(deleteNode: BinaryTreeNode<T>): BinaryTreeNode<T> {\r\n        let parentSuccessor: BinaryTreeNode<T> = deleteNode;\r\n        let successor: BinaryTreeNode<T>;\r\n        let current: BinaryTreeNode<T> = successor.getRight();\r\n        while (current !== undefined) {\r\n            parentSuccessor = successor;\r\n            successor = current;\r\n            current = current.getLeft();\r\n        }\r\n        if (successor !== deleteNode.getRight()) {\r\n            parentSuccessor.setLeft(successor.getRight());\r\n            successor.setRight(deleteNode.getRight());\r\n        }\r\n        return successor;\r\n    }\r\n    public delete(key: number): boolean {\r\n        let current: BinaryTreeNode<T> = this.root;\r\n        let parent: BinaryTreeNode<T>;\r\n        let isLeft: boolean = false;\r\n        while (current.getKey() !== key) {\r\n            parent = current;\r\n            if (key < current.getKey()) {\r\n                current = current.getLeft();\r\n                isLeft = true;\r\n            } else {\r\n                isLeft = false;\r\n                current = current.getRight();\r\n            }\r\n            if (current === undefined) { return false; }\r\n        }\r\n        if (current.getLeft() === undefined && current.getRight() === undefined) {\r\n            if (current === this.root) {\r\n                current = undefined;\r\n            } else if (isLeft) {\r\n                parent.setLeft(undefined);\r\n            } else {\r\n                parent.setRight(undefined);\r\n            }\r\n        } else if (current.getRight() === undefined) {\r\n            if (current === this.root) {\r\n                this.root = current.getLeft();\r\n            } else if (isLeft) {\r\n                parent.setLeft(current.getLeft());\r\n            } else {\r\n                current.setRight(current.getLeft());\r\n            }\r\n        } else if (current.getLeft() === undefined) {\r\n            if (current === this.root) {\r\n                this.root = current.getRight();\r\n            } else if (isLeft) {\r\n                parent.setLeft(current.getRight());\r\n            } else {\r\n                parent.setRight(current.getRight());\r\n            }\r\n        } else {\r\n            const successor: BinaryTreeNode<T> = this.getSuccessor(current);\r\n            if (current === this.root) {\r\n                this.root = successor;\r\n            } else if (isLeft) {\r\n                parent.setLeft(successor);\r\n            } else {\r\n                parent.setRight(successor);\r\n            }\r\n            successor.setLeft(current.getLeft());\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","// import * as d3 from \"d3\";\r\nimport { BinaryTree } from \"./binary-tree\";\r\nimport { BinaryTreeNode } from \"./binary-tree-node\";\r\n\r\nconst Tree: BinaryTree<string> = new BinaryTree<string>();\r\n\r\nTree.insert(\"John\", 3);\r\nTree.insert(\"T1000\", 8);\r\nTree.insert(\"Sara\", 1);\r\nTree.insert(\"T800\", 2);\r\nTree.insert(\"T400\", 4);\r\nTree.insert(\"T900\", 9);\r\nTree.insert(\"T1500\", 15);\r\nTree.insert(\"T500\", 5);\r\nTree.insert(\"T1200\", 12);\r\nTree.insert(\"T1100\", 11);\r\nTree.insert(\"T1300\", 13);\r\nTree.insert(\"T1000\", 10);\r\n\r\nconst key: number = 3;\r\nconst finds: BinaryTreeNode<string> = Tree.find(key);\r\n\r\nconsole.log(finds.printNode());\r\n\r\n// const treeData: object = Tree.print(finds);\r\n//\r\n// console.log(treeData);\r\n//\r\n// // ************** Generate the tree diagram\t *****************\r\n// const margin = {top: 20, right: 120, bottom: 20, left: 120},\r\n//     width = 960 - margin.right - margin.left,\r\n//     height = 500 - margin.top - margin.bottom;\r\n//\r\n// let i = 0;\r\n//\r\n// const tree = d3.layout.tree()\r\n//     .size([height, width]);\r\n//\r\n// const diagonal = d3.svg.diagonal()\r\n//     // tslint:disable-next-line:typedef\r\n//     .projection(function(d) { return [d.y, d.x]; });\r\n//\r\n// const svg = d3.select(\"body\").append(\"svg\")\r\n//     .attr(\"width\", width + margin.right + margin.left)\r\n//     .attr(\"height\", height + margin.top + margin.bottom)\r\n//     .append(\"g\")\r\n//     .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n//\r\n// const root = treeData;\r\n//\r\n// update(root);\r\n//\r\n// // tslint:disable-next-line:typedef\r\n// function update(source) {\r\n//\r\n//     // Compute the new tree layout.\r\n//     const nodes = tree.nodes(root).reverse(),\r\n//         links = tree.links(nodes);\r\n//\r\n//     // Normalize for fixed-depth.\r\n//     // tslint:disable-next-line:typedef\r\n//     nodes.forEach(function(d) { d.y = d.depth * 180; });\r\n//\r\n//     // Declare the nodes…\r\n//     const node = svg.selectAll(\"g.node\")\r\n//         // tslint:disable-next-line:typedef\r\n//         .data(nodes, function(d) { return d.id || (d.id = ++i); });\r\n//\r\n//     // Enter the nodes.\r\n//     const nodeEnter = node.enter().append(\"g\")\r\n//         .attr(\"class\", \"node\")\r\n//         // tslint:disable-next-line:typedef\r\n//         .attr(\"transform\", function(d) {\r\n//             return \"translate(\" + d.y + \",\" + d.x + \")\"; });\r\n//\r\n//     nodeEnter.append(\"circle\")\r\n//         .attr(\"r\", 10)\r\n//         .style(\"fill\", \"#fff\");\r\n//\r\n//     nodeEnter.append(\"text\")\r\n//         // tslint:disable-next-line:typedef\r\n//         .attr(\"x\", function(d) {\r\n//             return d.children || d._children ? -13 : 13; })\r\n//         .attr(\"dy\", \".35em\")\r\n//         // tslint:disable-next-line:typedef\r\n//         .attr(\"text-anchor\", function(d) {\r\n//             return d.children || d._children ? \"end\" : \"start\"; })\r\n//         // tslint:disable-next-line:typedef\r\n//         .text(function(d) { return d.name; })\r\n//         .style(\"fill-opacity\", 1);\r\n//\r\n//     // Declare the links…\r\n//     const link = svg.selectAll(\"path.link\")\r\n//         // tslint:disable-next-line:typedef\r\n//         .data(links, function(d) { return d.target.id; });\r\n//\r\n//     // Enter the links.\r\n//     link.enter().insert(\"path\", \"g\")\r\n//         .attr(\"class\", \"link\")\r\n//         .attr(\"d\", diagonal);\r\n// }\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYmluYXJ5LXRyZWUtbm9kZS50cyIsInNyYy9iaW5hcnktdHJlZS50cyIsInNyYy90ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQUEsSUFBQSxpQkFBQSxhQUFBLFlBQUE7QUFLSSxhQUFBLGNBQUEsQ0FBWSxVQUFaLEVBQTJCLEdBQTNCLEVBQXNDO0FBQ2xDLGFBQUssS0FBTCxHQUFhLFVBQWI7QUFDQSxhQUFLLElBQUwsR0FBWSxHQUFaO0FBQ0g7QUFDTSxtQkFBQSxTQUFBLENBQUEsU0FBQSxHQUFQLFlBQUE7QUFDSSxZQUFNLE9BQWlCLEVBQXZCO0FBQ0EsYUFBSyxJQUFMLENBQVU7QUFDTixtQkFBTyxLQUFLLElBRE47QUFFTixvQkFBUSxLQUFLLEtBRlA7QUFHTix5QkFBYSxLQUFLLEtBSFo7QUFJTiwwQkFBYyxLQUFLO0FBSmIsU0FBVjtBQU1BLGVBQU8sSUFBUDtBQUNILEtBVE07QUFVQSxtQkFBQSxTQUFBLENBQUEsT0FBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssS0FBWjtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsT0FBQSxHQUFQLFVBQWUsS0FBZixFQUF1QztBQUNuQyxhQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0gsS0FGTTtBQUdBLG1CQUFBLFNBQUEsQ0FBQSxRQUFBLEdBQVAsVUFBZ0IsS0FBaEIsRUFBd0M7QUFDcEMsYUFBSyxNQUFMLEdBQWMsS0FBZDtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsUUFBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssTUFBWjtBQUNILEtBRk07QUFHQSxtQkFBQSxTQUFBLENBQUEsTUFBQSxHQUFQLFlBQUE7QUFDSSxlQUFPLEtBQUssSUFBWjtBQUNILEtBRk07QUFHWCxXQUFBLGNBQUE7QUFBQyxDQWxDRCxFQUFBO0FBQWEsUUFBQSxjQUFBLEdBQUEsY0FBQTs7Ozs7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBjbGFzcyBCaW5hcnlUcmVlTm9kZTxUPiB7XHJcbiAgICBwcml2YXRlIF9MZWZ0OiBCaW5hcnlUcmVlTm9kZTxUPjtcclxuICAgIHByaXZhdGUgX1JpZ2h0OiBCaW5hcnlUcmVlTm9kZTxUPjtcclxuICAgIHByaXZhdGUgX0tleTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfRGF0YTogVDtcclxuICAgIGNvbnN0cnVjdG9yKGluc2VydERhdGE6IFQsIGtleTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fRGF0YSA9IGluc2VydERhdGE7XHJcbiAgICAgICAgdGhpcy5fS2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHByaW50Tm9kZSgpOiBvYmplY3Qge1xyXG4gICAgICAgIGNvbnN0IHRyZWU6IG9iamVjdFtdID0gW107XHJcbiAgICAgICAgdHJlZS5wdXNoKHtcclxuICAgICAgICAgICAgXCJrZXlcIjogdGhpcy5fS2V5LFxyXG4gICAgICAgICAgICBcImRhdGFcIjogdGhpcy5fRGF0YSxcclxuICAgICAgICAgICAgXCJsZWZ0Q2hpbGRcIjogdGhpcy5fTGVmdCxcclxuICAgICAgICAgICAgXCJyaWdodENoaWxkXCI6IHRoaXMuX1JpZ2h0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRyZWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0TGVmdCgpOiBCaW5hcnlUcmVlTm9kZTxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX0xlZnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0TGVmdCh2YWx1ZTogQmluYXJ5VHJlZU5vZGU8VD4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9MZWZ0ID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0UmlnaHQodmFsdWU6IEJpbmFyeVRyZWVOb2RlPFQ+KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fUmlnaHQgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRSaWdodCgpOiBCaW5hcnlUcmVlTm9kZTxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1JpZ2h0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldEtleSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9LZXk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQmluYXJ5VHJlZU5vZGUgfSBmcm9tIFwiLi9iaW5hcnktdHJlZS1ub2RlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmluYXJ5VHJlZTxUPiB7XHJcbiAgICBwcml2YXRlIHJvb3Q6IEJpbmFyeVRyZWVOb2RlPFQ+O1xyXG4gICAvLyBwcml2YXRlIF9ub2RlOiBvYmplY3QgPSBbXTtcclxuICAgIHB1YmxpYyBmaW5kKGtleTogbnVtYmVyKTogQmluYXJ5VHJlZU5vZGU8VD4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50OiBCaW5hcnlUcmVlTm9kZTxUPiA9IHRoaXMucm9vdDtcclxuICAgICAgICB3aGlsZSAoY3VycmVudC5nZXRLZXkoKSAhPT0ga2V5KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBrZXkgPCBjdXJyZW50LmdldEtleSgpID8gY3VycmVudC5nZXRMZWZ0KCkgOiBjdXJyZW50LmdldFJpZ2h0KCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIG51bGw7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaW5zZXJ0KGluc2VydERhdGE6IFQsIGtleTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gdGhpcy5yb290O1xyXG4gICAgICAgIGxldCBwYXJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+O1xyXG4gICAgICAgIGNvbnN0IG5ld05vZGU6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gbmV3IEJpbmFyeVRyZWVOb2RlPFQ+KGluc2VydERhdGEsIGtleSk7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCA9PT0gdW5kZWZpbmVkKSB7IHRoaXMucm9vdCA9IG5ld05vZGU7IH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA8IGN1cnJlbnQuZ2V0S2V5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5nZXRMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc2V0TGVmdChuZXdOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuZ2V0UmlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zZXRSaWdodChuZXdOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKnB1YmxpYyBwcmludChzdGFydE5vZGU6IEJpbmFyeVRyZWVOb2RlPFQ+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHN0YXJ0Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJpbnQoc3RhcnROb2RlLmdldExlZnQoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJpbnQoc3RhcnROb2RlLmdldFJpZ2h0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG4gICAgcHVibGljIGdldFN1Y2Nlc3NvcihkZWxldGVOb2RlOiBCaW5hcnlUcmVlTm9kZTxUPik6IEJpbmFyeVRyZWVOb2RlPFQ+IHtcclxuICAgICAgICBsZXQgcGFyZW50U3VjY2Vzc29yOiBCaW5hcnlUcmVlTm9kZTxUPiA9IGRlbGV0ZU5vZGU7XHJcbiAgICAgICAgbGV0IHN1Y2Nlc3NvcjogQmluYXJ5VHJlZU5vZGU8VD47XHJcbiAgICAgICAgbGV0IGN1cnJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gc3VjY2Vzc29yLmdldFJpZ2h0KCk7XHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBwYXJlbnRTdWNjZXNzb3IgPSBzdWNjZXNzb3I7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NvciA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmdldExlZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN1Y2Nlc3NvciAhPT0gZGVsZXRlTm9kZS5nZXRSaWdodCgpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFN1Y2Nlc3Nvci5zZXRMZWZ0KHN1Y2Nlc3Nvci5nZXRSaWdodCgpKTtcclxuICAgICAgICAgICAgc3VjY2Vzc29yLnNldFJpZ2h0KGRlbGV0ZU5vZGUuZ2V0UmlnaHQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdWNjZXNzb3I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZGVsZXRlKGtleTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+ID0gdGhpcy5yb290O1xyXG4gICAgICAgIGxldCBwYXJlbnQ6IEJpbmFyeVRyZWVOb2RlPFQ+O1xyXG4gICAgICAgIGxldCBpc0xlZnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICB3aGlsZSAoY3VycmVudC5nZXRLZXkoKSAhPT0ga2V5KSB7XHJcbiAgICAgICAgICAgIHBhcmVudCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPCBjdXJyZW50LmdldEtleSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5nZXRMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICBpc0xlZnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5nZXRSaWdodCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50LmdldExlZnQoKSA9PT0gdW5kZWZpbmVkICYmIGN1cnJlbnQuZ2V0UmlnaHQoKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0TGVmdCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldFJpZ2h0KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQuZ2V0UmlnaHQoKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLnJvb3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm9vdCA9IGN1cnJlbnQuZ2V0TGVmdCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldExlZnQoY3VycmVudC5nZXRMZWZ0KCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudC5zZXRSaWdodChjdXJyZW50LmdldExlZnQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQuZ2V0TGVmdCgpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMucm9vdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290ID0gY3VycmVudC5nZXRSaWdodCgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldExlZnQoY3VycmVudC5nZXRSaWdodCgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRSaWdodChjdXJyZW50LmdldFJpZ2h0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc29yOiBCaW5hcnlUcmVlTm9kZTxUPiA9IHRoaXMuZ2V0U3VjY2Vzc29yKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5yb290KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3QgPSBzdWNjZXNzb3I7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0TGVmdChzdWNjZXNzb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldFJpZ2h0KHN1Y2Nlc3Nvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VjY2Vzc29yLnNldExlZnQoY3VycmVudC5nZXRMZWZ0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBpbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcclxuaW1wb3J0IHsgQmluYXJ5VHJlZSB9IGZyb20gXCIuL2JpbmFyeS10cmVlXCI7XHJcbmltcG9ydCB7IEJpbmFyeVRyZWVOb2RlIH0gZnJvbSBcIi4vYmluYXJ5LXRyZWUtbm9kZVwiO1xyXG5cclxuY29uc3QgVHJlZTogQmluYXJ5VHJlZTxzdHJpbmc+ID0gbmV3IEJpbmFyeVRyZWU8c3RyaW5nPigpO1xyXG5cclxuVHJlZS5pbnNlcnQoXCJKb2huXCIsIDMpO1xyXG5UcmVlLmluc2VydChcIlQxMDAwXCIsIDgpO1xyXG5UcmVlLmluc2VydChcIlNhcmFcIiwgMSk7XHJcblRyZWUuaW5zZXJ0KFwiVDgwMFwiLCAyKTtcclxuVHJlZS5pbnNlcnQoXCJUNDAwXCIsIDQpO1xyXG5UcmVlLmluc2VydChcIlQ5MDBcIiwgOSk7XHJcblRyZWUuaW5zZXJ0KFwiVDE1MDBcIiwgMTUpO1xyXG5UcmVlLmluc2VydChcIlQ1MDBcIiwgNSk7XHJcblRyZWUuaW5zZXJ0KFwiVDEyMDBcIiwgMTIpO1xyXG5UcmVlLmluc2VydChcIlQxMTAwXCIsIDExKTtcclxuVHJlZS5pbnNlcnQoXCJUMTMwMFwiLCAxMyk7XHJcblRyZWUuaW5zZXJ0KFwiVDEwMDBcIiwgMTApO1xyXG5cclxuY29uc3Qga2V5OiBudW1iZXIgPSAzO1xyXG5jb25zdCBmaW5kczogQmluYXJ5VHJlZU5vZGU8c3RyaW5nPiA9IFRyZWUuZmluZChrZXkpO1xyXG5cclxuY29uc29sZS5sb2coZmluZHMucHJpbnROb2RlKCkpO1xyXG5cclxuLy8gY29uc3QgdHJlZURhdGE6IG9iamVjdCA9IFRyZWUucHJpbnQoZmluZHMpO1xyXG4vL1xyXG4vLyBjb25zb2xlLmxvZyh0cmVlRGF0YSk7XHJcbi8vXHJcbi8vIC8vICoqKioqKioqKioqKioqIEdlbmVyYXRlIHRoZSB0cmVlIGRpYWdyYW1cdCAqKioqKioqKioqKioqKioqKlxyXG4vLyBjb25zdCBtYXJnaW4gPSB7dG9wOiAyMCwgcmlnaHQ6IDEyMCwgYm90dG9tOiAyMCwgbGVmdDogMTIwfSxcclxuLy8gICAgIHdpZHRoID0gOTYwIC0gbWFyZ2luLnJpZ2h0IC0gbWFyZ2luLmxlZnQsXHJcbi8vICAgICBoZWlnaHQgPSA1MDAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuLy9cclxuLy8gbGV0IGkgPSAwO1xyXG4vL1xyXG4vLyBjb25zdCB0cmVlID0gZDMubGF5b3V0LnRyZWUoKVxyXG4vLyAgICAgLnNpemUoW2hlaWdodCwgd2lkdGhdKTtcclxuLy9cclxuLy8gY29uc3QgZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKVxyXG4vLyAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnR5cGVkZWZcclxuLy8gICAgIC5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pO1xyXG4vL1xyXG4vLyBjb25zdCBzdmcgPSBkMy5zZWxlY3QoXCJib2R5XCIpLmFwcGVuZChcInN2Z1wiKVxyXG4vLyAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5yaWdodCArIG1hcmdpbi5sZWZ0KVxyXG4vLyAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbi8vICAgICAuYXBwZW5kKFwiZ1wiKVxyXG4vLyAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcclxuLy9cclxuLy8gY29uc3Qgcm9vdCA9IHRyZWVEYXRhO1xyXG4vL1xyXG4vLyB1cGRhdGUocm9vdCk7XHJcbi8vXHJcbi8vIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0eXBlZGVmXHJcbi8vIGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UpIHtcclxuLy9cclxuLy8gICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cclxuLy8gICAgIGNvbnN0IG5vZGVzID0gdHJlZS5ub2Rlcyhyb290KS5yZXZlcnNlKCksXHJcbi8vICAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcclxuLy9cclxuLy8gICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGguXHJcbi8vICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dHlwZWRlZlxyXG4vLyAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7IGQueSA9IGQuZGVwdGggKiAxODA7IH0pO1xyXG4vL1xyXG4vLyAgICAgLy8gRGVjbGFyZSB0aGUgbm9kZXPigKZcclxuLy8gICAgIGNvbnN0IG5vZGUgPSBzdmcuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXHJcbi8vICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnR5cGVkZWZcclxuLy8gICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7IH0pO1xyXG4vL1xyXG4vLyAgICAgLy8gRW50ZXIgdGhlIG5vZGVzLlxyXG4vLyAgICAgY29uc3Qgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuLy8gICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4vLyAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0eXBlZGVmXHJcbi8vICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnkgKyBcIixcIiArIGQueCArIFwiKVwiOyB9KTtcclxuLy9cclxuLy8gICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuLy8gICAgICAgICAuYXR0cihcInJcIiwgMTApXHJcbi8vICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcIiNmZmZcIik7XHJcbi8vXHJcbi8vICAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4vLyAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0eXBlZGVmXHJcbi8vICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTMgOiAxMzsgfSlcclxuLy8gICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuLy8gICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dHlwZWRlZlxyXG4vLyAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkge1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbi8vICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnR5cGVkZWZcclxuLy8gICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pXHJcbi8vICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xyXG4vL1xyXG4vLyAgICAgLy8gRGVjbGFyZSB0aGUgbGlua3PigKZcclxuLy8gICAgIGNvbnN0IGxpbmsgPSBzdmcuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXHJcbi8vICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnR5cGVkZWZcclxuLy8gICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQuaWQ7IH0pO1xyXG4vL1xyXG4vLyAgICAgLy8gRW50ZXIgdGhlIGxpbmtzLlxyXG4vLyAgICAgbGluay5lbnRlcigpLmluc2VydChcInBhdGhcIiwgXCJnXCIpXHJcbi8vICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcclxuLy8gICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xyXG4vLyB9XHJcbiJdfQ=="}